# 微前端 - 大巫

## 了解微前端？

- 因前端技术层面上存在的一些缺陷而提出来的，比如：

1. 组件太多，打包时间太慢，只改了 1 行 js，导致整个项目需要重新打包发版。
2. 不想对老项目进行改造，但是又想使用老项目的功能，以现在的技术就需要对其进行重写。

- 基于以上考虑因素，就需要对框架进行隔离、数据进行隔离、独立发版。这就是微前端做的事情。

## 微前端的解决方案？

1. 路由分发 - 将路由交给后端，由后端进行控制。
   弊端：每次相当于要重新刷新页面。
2. iframe - 样式隔离、js 隔离。
   弊端：主应用会劫持快捷键操作，事件无法冒泡顶层，iframe 内元素会被限制在文档树中，视窗宽高限制问题，无法共享基础库减少包体积，事件通信繁琐且限制多。
3. 组合式应用路由分发 - 比较常见的 2 个解决方案：single-spa，qiankun(基于 single-spa)
   每个子应用单独的打包、部署和运行。需要基于父应用进行路由管理。比如：有子应用 A 的路由是/testA，子应用 B 的路由是/testB，那么父应用在监听到/testA 的时候，如果此时处于/testB，那么首先会进行一个子应用 B 的卸载。完成之后，再去加载子应用 A。
   优点：纯前端改造，相比于路由式，无刷新，体验感良好。
   缺点：需要解决样式冲突，JS 污染问题，通信技术等。
   实现原理：开始时注册子应用，通过判断 url 注册时 navigator-events，若匹配的话，会通过这个信息去加载 getAppChanges 的方法，得到哪些是需要加载的，哪些是需要卸载的，哪些是需要挂载的，进行相应的操作，再进行事件回调。
